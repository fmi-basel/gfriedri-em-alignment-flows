###
### A complete description of a Prefect Deployment for flow '[SOFIMA] Register Tiles'
###
name: buchtimo
description: null
version: 79f34855001a483e06b48bd918895b7f
# The work queue that will handle this deployment's runs
work_queue_name: buchtimo
work_pool_name: SLURM
tags: []
parameters: {}
schedule: null
is_schedule_active: true
infra_overrides: {}

###
### DO NOT EDIT BELOW THIS LINE
###
flow_name: '[SOFIMA] Register Tiles'
manifest_path: null
infrastructure:
  type: process
  env:
    XLA_FLAGS: --xla_cpu_multi_thread_eigen=false intra_op_parallelism_threads=1
    WF_ENV_NAME: gfriedri-em-alignment-flows
    MKL_NUM_THREADS: '1'
    OMP_NUM_THREADS: '1'
    BLIS_NUM_THREADS: '1'
    NUMEXPR_NUM_THREADS: '1'
    OPENBLAS_NUM_THREADS: '1'
    PREFECT_LOGGING_LEVEL: INFO
    VECLIB_MAXIMUM_THREADS: '1'
    PREFECT_LOCAL_STORAGE_PATH: /tungstenfs/scratch/gmicro_prefect/gmicro/buchtimo/SOFIMA/result_storage
    PREFECT_TASKS_REFRESH_CACHE: 'true'
  labels: {}
  name: null
  command:
  - /tungstenfs/scratch/gmicro_prefect/gmicro/buchtimo/SOFIMA/slurm/gpu-job.sh
  stream_output: false
  working_dir: /tungstenfs/scratch/gmicro_prefect/gmicro/buchtimo/SOFIMA/working_dir
  _block_document_id: 0d89245f-692d-4077-abc4-cf2aaae44164
  _block_document_name: gfriedri-em-alignment-buchtimo-gpu
  _is_anonymous: false
  block_type_slug: process
  _block_type_slug: process
storage:
  repository: https://github.com/fmi-basel/gfriedri-em-alignment-flows
  reference: refactor-tile-registration
  access_token: null
  include_git_objects: false
  _block_document_id: 57e117c0-e230-4edc-b20e-0dc64e35f4ed
  _block_document_name: gfriedri-em-alignment-flow-buchtimo
  _is_anonymous: false
  block_type_slug: github
  _block_type_slug: github
path: ''
entrypoint: 01_tile-stitching/prefect_tile_stitching.py:register_tiles_flow
parameter_openapi_schema:
  title: Parameters
  type: object
  properties:
    section_yaml_files:
      title: section_yaml_files
      position: 0
      type: array
      items:
        type: string
    mesh_integration_config:
      title: mesh_integration_config
      position: 1
      allOf:
      - $ref: '#/definitions/MeshIntegrationConfig'
    registration_config:
      title: registration_config
      position: 2
      allOf:
      - $ref: '#/definitions/RegistrationConfig'
  required:
  - section_yaml_files
  - mesh_integration_config
  - registration_config
  definitions:
    MeshIntegrationConfig:
      title: MeshIntegrationConfig
      type: object
      properties:
        dt:
          title: Dt
          default: 0.001
          type: number
        gamma:
          title: Gamma
          default: 0.0
          type: number
        k0:
          title: K0
          default: 0.01
          type: number
        k:
          title: K
          default: 0.1
          type: number
        stride:
          title: Stride
          default: 20
          type: integer
        num_iters:
          title: Num Iters
          default: 1000
          type: integer
        max_iters:
          title: Max Iters
          default: 20000
          type: integer
        stop_v_max:
          title: Stop V Max
          default: 0.001
          type: number
        dt_max:
          title: Dt Max
          default: 100.0
          type: number
        prefer_orig_order:
          title: Prefer Orig Order
          default: true
          type: boolean
        start_cap:
          title: Start Cap
          default: 1.0
          type: number
        final_cap:
          title: Final Cap
          default: 10.0
          type: number
        remove_drift:
          title: Remove Drift
          default: true
          type: boolean
    RegistrationConfig:
      title: RegistrationConfig
      type: object
      properties:
        overlaps_x:
          title: Overlaps X
          default:
          - 200
          - 300
          - 400
          type: array
          items:
            type: integer
        overlaps_y:
          title: Overlaps Y
          default:
          - 200
          - 300
          - 400
          type: array
          items:
            type: integer
        min_overlap:
          title: Min Overlap
          default: 20
          type: integer
        min_range:
          title: Min Range
          default:
          - 10
          - 100
          - 0
          type: array
          items:
            type: integer
        patch_size:
          title: Patch Size
          default:
          - 80
          - 80
          type: array
          items:
            type: integer
        batch_size:
          title: Batch Size
          default: 8000
          type: integer
        min_peak_ratio:
          title: Min Peak Ratio
          default: 1.4
          type: number
        min_peak_sharpness:
          title: Min Peak Sharpness
          default: 1.4
          type: number
        max_deviation:
          title: Max Deviation
          default: 5
          type: integer
        max_magnitude:
          title: Max Magnitude
          default: 0
          type: integer
        min_patch_size:
          title: Min Patch Size
          default: 10
          type: integer
        max_gradient:
          title: Max Gradient
          default: -1.0
          type: number
        reconcile_flow_max_deviation:
          title: Reconcile Flow Max Deviation
          default: -1.0
          type: number
timestamp: '2023-07-10T11:21:24.231158+00:00'
triggers: []
